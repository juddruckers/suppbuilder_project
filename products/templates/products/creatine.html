{% load static %}
      
        <div class='panel panel-default'>
          <div class="panel-body">  
              <!-- if the product exists in the cart_items list then display the cost of the item that exists in the cart -->
                <div class="row">
                  {% if product.title in cart_items %}
                    <div class="col-lg-12">
                      {% for variation in product.variation_set.all %}
                        {% if variation.id in variation_list %}
                          <h2>{{variation.product.title|title}} 
                            $<span class="{{product.title}}-cost">{{variation.cost}}</span> - $
                            <span class="{{product.title}}-serving-cost">{{variation.thirty_day}}</span>/per serving
                          </h2>
                        {% endif %}
                      {% endfor %}
                    </div>
                    {% else %}

                    <!-- if the item does not exist in the cart display the first variation in the set -->
                    <div class="col-lg-12">
                      {% with product.variation_set.all|first as variation %}
                          <h2>{{variation.product.title|title}} 
                            $<span class="{{product.title}}-cost">{{variation.cost}}</span> - $
                            <span class="{{product.title}}-serving-cost">{{variation.thirty_day}}</span>/per serving
                          </h2>
                      {% endwith %}
                    </div>              
                  {% endif %}    
                </div>

                <div class="row">
                  <div class="col-sm-6">
                    <p>{{product.description}}<p>

                    <!-- disable the select dropdown if the product is already inside the cart -->
                    <select class="form-control select product-select" {% if product.title in cart_items %} disabled {%endif%}>

                      <!-- if the variation id is in the variation_list that option is selected -->
                      {% for variation in product.variation_set.all %}
                          <option value={{variation.id}} 
                                  data-title={{variation.product.title}} 
                                  data-price={{variation.price}}
                                  data-serving={{variation.thirty_day}}
                                  {% if variation.id in variation_list %}
                                    selected
                                  {% endif %}>
                                  {{variation.product.title|title}} {{variation.serving_size}}
                          </option>              
                      {% endfor %}            
                    </select>

                    {% if product.title in cart_items %}
                      <button class="btn btn-default product-add remove" data-toggle="modal" data-target="#myModal">Add {{product.title}}</button>
                      <button class="btn btn-default product-remove">Remove {{product.title}}</button>
                    {% else %}
                      <button class="btn btn-default product-add" data-toggle="modal" data-target="#myModal">Add {{product.title}}</button>
                      <button class="btn btn-default product-remove remove">Remove {{product.title}}</button>
                    {% endif %} 
                  </div>

                  <div class="col-sm-6">
                    <ul class="list-group">
                    {% for benefit in product.benefits.all %}
                      <li class="list-group-item">{{benefit}}</li>
                    {% endfor %}
                    </ul>
                  </div>
                </div>
        </div>
      </div>

<!-- end of product button row --> 