{% extends 'suppbuilder/base.html' %}
{% load static %}
{% load carton_tags %}
{% get_cart as cart %}
{% block head %}
    
<link rel="stylesheet" type="text/css" href="{% static 'products/product.css' %}">
{% endblock %}

{% block body %}

{% include  'products/header.html' %}

  <!-- Tab panes -->
<div class="container">
  <div class="tab-content">
    <div role="tabpanel" class="tab-page fade in active" id="home">
      {% for product in products %} 
      {% if product.title == 'caffeine' %}      
      <div class="row">
        <div class="col-lg-12">
          {% with product.variation_set.all|first as product %}
            <h2> {{product.product.title|title}}: ${{product.cost}} - ${{product.thirty_day}}/per serving </h2>
          {% endwith %}
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <p>{{product.description}}<p>

          <select class="form-control select" {% if product.title in cart_items %} disabled {%endif%}>
            {% for variation in product.variation_set.all %}

              <!-- if the variation id is in the variation_list that option is selected -->
                <option value={{variation.id}} data-title={{variation.product.title}} {% if variation.id in variation_list %}selected{% endif %}>{{variation.product.title|title}} {{variation.serving_size}}
                </option>              
            {% endfor %}            
          </select>

          {% if product.title in cart_items %}
            <button class="btn btn-default product-add remove" data-toggle="modal" data-target="#myModal">Add {{product.title}}</button>
            <button class="btn btn-default product-remove">Remove {{product.title}}</button>
          {% else %}
            <button class="btn btn-default product-add" data-toggle="modal" data-target="#myModal">Add {{product.title}}</button>
            <button class="btn btn-default product-remove remove">Remove {{product.title}}</button>
          {% endif %}
          
        </div>
        <div class="col-sm-12">

                    
        </div>
      </div>
      {% endif %}
      {% endfor %}
    </div>
  </div>  
</div>

<div class="tab-content">
<div role="tabpanel" class="tab-pane fade in active" id="home">
<div class='container product-container'>
<div class='panel panel-default'>
  <div class='panel-body'>
  <div class='row'>
    <div class='col-lg-12'>
      {% if caffeine_match %}
        <h2>
          {{caffeine.title}}
          <span id='caffeine-size' class='item-size' >
            {{caffeine_match.0.serving_size}}/serving
          </span>
          <span id='caffeine-price' class='item-price'> 
            ${{caffeine_match.0.price}} (${{caffeine_match.0.thirty_day}}/serving)
          </span>
        </h2>
      {% else %}
        <h2>
          {{caffeine.title}}
          <span id='caffeine-size' class='item-size'>
            {{caffeine.serving_size}}/serving
          </span>
          <span id='caffeine-price' class='item-price'> 
            ${{caffeine.price}} (${{caffeine.thirty_day}}/serving) 
          </span>
        </h2>
      {% endif %}
    </div>
  </div>

  {% if caffeine_match %}
  <div>
  {% else %}
  <div>
  {%endif %}
    <div class='col-lg-8'>  
      <h5>Product description</h5>
      <p>{{caffeine.description}}</p>
    </div>
    <div class='col-lg-4'>
      <h5>Key Benefits</h5>
        <ul>
          {% for benefit in caffeine.benefits.all %}
            <li>{{benefit}}</li>  
          {% endfor %}
        </ul>
    </div>
  </div>

  {% if caffeine_match %}
  <div class='row collapse' id='selectCaffeine'>
  {% else %}
  <div class='row collapse in'id='selectCaffeine'>
  {%endif %}
    <div class='col-lg-6'>    
        <label for='caffeine-select'><h4>Select serving size :</h4></label>
        {%if caffeine_match %}
          <select class='form-control selector' id="caffeine-select" disabled="disabled">
          {% else %}
          <select class='form-control selector' id="caffeine-select">
        {% endif %}
            {% for product in caffeine_products %}
              {% if product.id == caffeine_match.0.id %}
                <option value="{{product.id}}" data-caffeine-price='{{product.price}}' data-serving-size='{{product.serving_size}}' selected> {{product.title}} {{product.serving_size}}</option>
                {% else %}
                <option value="{{product.id}}" data-caffeine-price='{{product.price}}'data-serving-size='{{product.serving_size}}'> {{product.title}} {{product.serving_size}}</option>
              {% endif %}
            {% endfor %}
          </select>
    </div>
  </div>
    <div class='row'>
      <div class='col-lg-12'>
        {% if caffeine_match %}
          <button type="button" class="btn btn-success caffeine-add remove" data-toggle="modal" data-target="#myModal">Add {{caffeine.title}}</button>
          <button type="button" class="btn btn-danger caffeine-remove" >Remove {{caffeine.title}}</button>
          {% else %}
          <button type="button" class="btn btn-success caffeine-add" data-toggle="modal" data-target="#myModal">Add {{caffeine.title}}</button>
          <button type="button" class="btn btn-danger caffeine-remove remove" >Remove {{caffeine.title}}</button>
        {% endif %}
      </div>
    </div>
<hr>


<!-- research container -->
<section id='research'>
  <div class='container research-container'>
      <div class='row'>
        <div class='col-lg-12 col-xs-12'>
            <h1>Caffeine Research</h1>
            <div class='row'>
              <div class='col-lg-12 col-xs-12'>
                <h3>Power output</h3>
                {% for research in caffeine_research %}
                  {% if research.product_effect == "Power Output" %}
                    <p><a href="{{research.research_article}}" target="_blanks">{{research}} </a></p>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
        </div>
      </div>
  </div>
</section>
<!-- end reserach container -->



</div>
</div>
</div>

  </div>
    <div role="tabpanel" class="tab-pane fade" id="creatine">
      {% include 'products/creatine.html' %}
    </div>
    <div role="tabpanel" class="tab-pane fade" id="caffeine">
      {% include 'products/caffeine.html' %}
    </div>
    <div role="tabpanel" class="tab-pane" id="theanine">
      {% include 'products/theanine.html' %}
    </div>
    <div role="tabpanel" class="tab-pane" id="beta-alanine">
      {% include 'products/beta-alanine.html' %}
    </div>
    <div role="tabpanel" class="tab-pane" id="bcaa">
      {% include 'products/bcaa.html' %}
    </div>
    <div role="tabpanel" class="tab-pane" id="citrulline-malate">
      {% include 'products/citrulline-malate.html' %}
    </div>
    <div role="tabpanel" class="tab-pane" id="betaine">
      {% include 'products/betaine.html' %}
    </div>
    <div role="tabpanel" class="tab-pane" id="ashwagandha">
      {% include 'products/ashwagandha.html' %}
    </div>
    <div role="tabpanel" class="tab-pane" id="rhodiola-rosea">
      {% include 'products/rhodiola-rosea.html' %}
    </div>
    <div role="tabpanel" class="tab-pane" id="hmb">
      {% include 'products/hmb.html' %}
    </div>
    <div role="tabpanel" class="tab-pane" id="carnitine">
      {% include 'products/l-carnitine.html' %}
    </div>
  </div>
</div>
</div>

<div class='container'>
  <div class='row'>
    <div class='col-lg-6 col-lg-offset-3'>
      <nav aria-label="...">
        <ul class="pager">  
          <li class="next"><a href="{% url 'shopping-cart-show' %}">Checkout<span aria-hidden="true">&rarr;</span></a></li>
        </ul>
      </nav>
    </div>
  </div>
</div>


{% endblock %}

{% block footer %}
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script type="text/JavaScript" src="{% static 'products/products.js' %}"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
{% endblock %}

